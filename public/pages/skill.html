<section class="subpage-hero skill-hero">
  <span class="home-pill">For Agents</span>
  <h1>Agent playbook for building and deploying on OnHyper.</h1>
  <p>Everything an agent needs to go from product idea to secure live app.</p>
</section>

<div class="skill-page redesign-surface">
  <div class="skill-header">
    <h1>OnHyper Agent Skill</h1>
    <p class="skill-subtitle">Build and deploy web apps with secure API proxying. This skill teaches agents how to create apps that safely call AI APIs without exposing keys.</p>
  </div>

  <section class="skill-section">
    <h2>What is OnHyper?</h2>
    <p>OnHyper is a platform for building and deploying web apps with <strong>secure API key management</strong>. API keys are encrypted with AES-256-GCM and never exposed to browsers‚Äîapps call APIs through OnHyper's proxy endpoints.</p>
    
    <div class="feature-highlights">
      <div class="feature-highlight">
        <h4>üîê Secure secret storage</h4>
        <p>API keys encrypted server-side, never in client code</p>
      </div>
      <div class="feature-highlight">
        <h4>üöÄ Proxy endpoints</h4>
        <p>Pre-configured for OpenAI, Anthropic, OpenRouter, ScoutOS, Ollama</p>
      </div>
      <div class="feature-highlight">
        <h4>üåê App hosting</h4>
        <p>Publish at <code>{subdomain}.onhyper.io</code> (default) or <code>onhyper.io/a/{slug}</code></p>
      </div>
      <div class="feature-highlight">
        <h4>üîó Custom subdomains</h4>
        <p>Claim a unique subdomain for your app</p>
      </div>
      <div class="feature-highlight">
        <h4>üÜì Free tier</h4>
        <p>100 requests/day, 3 apps</p>
      </div>
    </div>
  </section>

  <section class="skill-section">
    <h2>Workflow</h2>
    
    <h3>1. Create Account</h3>
    <p>Sign up at <code>https://onhyper.io</code> or via API:</p>
    <pre><code>curl -X POST https://onhyper.io/api/auth/signup \
  -H "Content-Type: application/json" \
  -d '{"email": "user@example.com", "password": "securepass"}'</code></pre>
    <p class="note">Response includes session token‚Äîstore in localStorage for authenticated requests.</p>

    <h3>2. Store API Keys (Secrets)</h3>
    <p>Store API keys securely via dashboard or API:</p>
    <pre><code># List stored secrets
curl https://onhyper.io/api/secrets \
  -H "X-API-Key: oh_live_&lt;session_token&gt;"

# Store a new secret
curl -X POST https://onhyper.io/api/secrets \
  -H "X-API-Key: oh_live_&lt;session_token&gt;" \
  -H "Content-Type: application/json" \
  -d '{"provider": "openai", "key": "sk-..."}'</code></pre>
    <p>Supported providers: <code>openai</code>, <code>anthropic</code>, <code>openrouter</code>, <code>scoutos</code>, <code>ollama</code></p>

    <h3>3. Build App</h3>
    <p>Create an HTML/CSS/JS app. Use fetch to call AI APIs through OnHyper's proxy.</p>

    <h3>4. Publish App</h3>
    <p>Via API:</p>
    <pre><code># Create app
curl -X POST https://onhyper.io/api/apps \
  -H "X-API-Key: oh_live_&lt;session_token&gt;" \
  -H "Content-Type: application/json" \
  -d '{"name": "My App", "slug": "my-app", "html": "&lt;html&gt;...&lt;/html&gt;"}'

# Publish app (optionally with a subdomain)
curl -X POST https://onhyper.io/api/apps/&lt;app_id&gt;/publish \
  -H "X-API-Key: oh_live_&lt;session_token&gt;" \
  -H "Content-Type: application/json" \
  -d '{"subdomain": "my-app"}'</code></pre>
    <p>App becomes available at:</p>
    <ul>
      <li><code>https://{subdomain}.onhyper.io</code> (if subdomain claimed ‚Äî recommended)</li>
      <li><code>https://onhyper.io/a/{slug}</code> (always available as fallback)</li>
    </ul>

    <h3>Slug Resolution Behavior</h3>
    <p class="note"><strong>Important:</strong> Requested slugs may be auto-suffixed if already taken (e.g., <code>my-app</code> ‚Üí <code>my-app-a1b2c3d4</code>).</p>
    <p>After creating or updating an app, call <code>GET /api/apps</code> to resolve the actual persisted slug. Use that exact slug for:</p>
    <ul>
      <li>Live URL: <code>/a/{slug}</code></li>
      <li><code>X-App-Slug</code> header in proxy calls</li>
    </ul>

    <h3>5. Custom Subdomains</h3>
    <p>Each user can claim <strong>one unique subdomain</strong> for their apps. <strong>Subdomains are the default and recommended way to access your apps.</strong></p>
    <p class="note"><strong>Note:</strong> Subdomains provide cleaner URLs (<code>myapp.onhyper.io</code> vs <code>onhyper.io/a/my-app-abc123</code>) and support client-side routing for SPAs. Path-based URLs (<code>/a/{slug}</code>) are available as fallback for custom domain setups.</p>
    <pre><code># Check availability
curl "https://onhyper.io/api/subdomains/check?name=my-app"

# Claim a subdomain
curl -X POST https://onhyper.io/api/subdomains/claim \
  -H "X-API-Key: oh_live_&lt;session_token&gt;" \
  -H "Content-Type: application/json" \
  -d '{"subdomain": "my-app"}'

# List your subdomains
curl https://onhyper.io/api/subdomains/mine \
  -H "X-API-Key: oh_live_&lt;session_token&gt;"</code></pre>
    <p class="note"><strong>Rules:</strong> PRO plan required for subdomains. Short subdomains (&lt;6 chars) require BUSINESS plan. 3-63 chars, lowercase letters/numbers/hyphens only. Reserved names (api, www, admin, blog) are blocked.</p>
  </section>

  <section class="skill-section">
    <h2>Proxy Endpoints</h2>
    <table class="api-table">
      <thead>
        <tr>
          <th>Endpoint</th>
          <th>Routes To</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>/proxy/openai/*</code></td>
          <td>OpenAI API (<code>api.openai.com</code>)</td>
        </tr>
        <tr>
          <td><code>/proxy/anthropic/*</code></td>
          <td>Anthropic API (<code>api.anthropic.com</code>)</td>
        </tr>
        <tr>
          <td><code>/proxy/openrouter/*</code></td>
          <td>OpenRouter API (<code>openrouter.ai/api/v1</code>)</td>
        </tr>
        <tr>
          <td><code>/proxy/scoutos/*</code></td>
          <td>ScoutOS Platform (Agents, Workflows, Tables, Drive)</td>
        </tr>
        <tr>
          <td><code>/proxy/ollama/*</code></td>
          <td>Ollama local LLM</td>
        </tr>
      </tbody>
    </table>

    <h3>Proxy Usage</h3>
    <p>Always include <code>X-App-Slug</code> header to identify your app:</p>
    
    <h4>X-App-Slug Must Match Actual Published Slug</h4>
    <p class="note"><strong>Critical:</strong> Proxy auth/routing uses the app slug value. If an app was auto-suffixed at publish time and your frontend sends the original (unsuffixed) slug, proxy calls will fail with 401/404 errors.</p>
    <p><strong>Recommendation:</strong> Derive the slug at runtime from the URL path when possible, rather than hardcoding it.</p>
    
    <h4>OpenAI</h4>
    <pre><code>fetch('https://onhyper.io/proxy/openai/v1/chat/completions', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
    'X-App-Slug': 'your-app-slug'
  },
  body: JSON.stringify({
    model: 'gpt-4',
    messages: [{ role: 'user', content: 'Hello!' }]
  })
})</code></pre>

    <h4>Anthropic Claude</h4>
    <pre><code>fetch('https://onhyper.io/proxy/anthropic/v1/messages', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
    'X-App-Slug': 'your-app-slug',
    'anthropic-version': '2023-06-01'
  },
  body: JSON.stringify({
    model: 'claude-3-sonnet-20240229',
    max_tokens: 1024,
    messages: [{ role: 'user', content: 'Hello!' }]
  })
})</code></pre>

    <h4>OpenRouter</h4>
    <pre><code>fetch('https://onhyper.io/proxy/openrouter/v1/chat/completions', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
    'X-App-Slug': 'your-app-slug'
  },
  body: JSON.stringify({
    model: 'anthropic/claude-3-opus',
    messages: [{ role: 'user', content: 'Hello!' }]
  })
})</code></pre>
  </section>

  <section class="skill-section">
    <h2>API Reference</h2>
    
    <h3>Authentication</h3>
    <table class="api-table">
      <thead>
        <tr>
          <th>Endpoint</th>
          <th>Method</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>/api/auth/signup</code></td>
          <td>POST</td>
          <td>Create account</td>
        </tr>
        <tr>
          <td><code>/api/auth/login</code></td>
          <td>POST</td>
          <td>Login, returns session token</td>
        </tr>
      </tbody>
    </table>

    <h3>Secrets Management</h3>
    <table class="api-table">
      <thead>
        <tr>
          <th>Endpoint</th>
          <th>Method</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>/api/secrets</code></td>
          <td>GET</td>
          <td>List stored API keys</td>
        </tr>
        <tr>
          <td><code>/api/secrets</code></td>
          <td>POST</td>
          <td>Store new API key</td>
        </tr>
      </tbody>
    </table>

    <h3>Apps</h3>
    <table class="api-table">
      <thead>
        <tr>
          <th>Endpoint</th>
          <th>Method</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>/api/apps</code></td>
          <td>GET</td>
          <td>List your apps</td>
        </tr>
        <tr>
          <td><code>/api/apps</code></td>
          <td>POST</td>
          <td>Create new app</td>
        </tr>
        <tr>
          <td><code>/api/apps/:id</code></td>
          <td>PUT</td>
          <td>Update app content</td>
        </tr>
        <tr>
          <td><code>/api/apps/:id</code></td>
          <td>DELETE</td>
          <td>Delete app</td>
        </tr>
        <tr>
          <td><code>/api/apps/:id/publish</code></td>
          <td>POST</td>
          <td>Publish app (optional <code>subdomain</code> field)</td>
        </tr>
      </tbody>
    </table>

    <h3>Subdomains</h3>
    <table class="api-table">
      <thead>
        <tr>
          <th>Endpoint</th>
          <th>Method</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>/api/subdomains/check?name=X</code></td>
          <td>GET</td>
          <td>Check subdomain availability</td>
        </tr>
        <tr>
          <td><code>/api/subdomains/claim</code></td>
          <td>POST</td>
          <td>Claim a subdomain</td>
        </tr>
        <tr>
          <td><code>/api/subdomains/mine</code></td>
          <td>GET</td>
          <td>List your claimed subdomains</td>
        </tr>
        <tr>
          <td><code>/api/subdomains/:name</code></td>
          <td>DELETE</td>
          <td>Release a subdomain</td>
        </tr>
      </tbody>
    </table>

    <h3>Response Envelope Note</h3>
    <p class="note">Some endpoints return object-wrapped arrays (e.g., <code>{ "apps": [...] }</code>) rather than raw arrays. Normalize your response handling to support all formats:</p>
    <ul>
      <li>Raw array: <code>[...]</code></li>
      <li>Data wrapper: <code>{ "data": [...] }</code></li>
      <li>Named wrapper: <code>{ "apps": [...] }</code></li>
    </ul>
  </section>

  <section class="skill-section">
    <h2>Best Practices</h2>
    <ol>
      <li><strong>Always include <code>X-App-Slug</code> header</strong> ‚Äî Required for proxy routing and rate limiting</li>
      <li><strong>Use <code>Accept-Encoding: identity</code></strong> ‚Äî For binary/streaming responses (audio, images)</li>
      <li><strong>Store session token in localStorage</strong> ‚Äî For authenticated requests throughout session:
        <pre><code>localStorage.setItem('onhyper_token', response.token);</code></pre>
      </li>
      <li><strong>Handle rate limits</strong> ‚Äî Free tier: 100 requests/day. Upgrade for higher limits.</li>
      <li><strong>Unique slugs</strong> ‚Äî App slugs must be unique across the platform. Consider adding random suffix.</li>
      <li><strong>Handle plan limits gracefully</strong> ‚Äî Free tier may reject app creation with 403 (App limit reached). Fallback: update an existing app instead of creating new.</li>
      <li><strong>Prefer snippet-style HTML upload</strong> ‚Äî Use a single HTML snippet containing <code>&lt;style&gt;</code>, app root element, and <code>&lt;script&gt;</code> for maximum compatibility.</li>
      <li><strong>Post-publish verification</strong> ‚Äî Always verify: (1) URL returns 200, (2) proxy call returns 200, (3) one backend read + one AI call succeeds.</li>
    </ol>
  </section>

  <section class="skill-section">
    <h2>Live Examples</h2>
    <table class="api-table">
      <thead>
        <tr>
          <th>App</th>
          <th>URL</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Simple Todo</td>
          <td><code>simple-todo.onhyper.io</code></td>
          <td>Basic todo app</td>
        </tr>
        <tr>
          <td>AI Todo (Server)</td>
          <td><code>ai-todo.onhyper.io</code></td>
          <td>Todo with server-side storage</td>
        </tr>
        <tr>
          <td>Support Chat</td>
          <td><code>onhyper.io/#/chat</code></td>
          <td>OnHyper support chat</td>
        </tr>
      </tbody>
    </table>
  </section>

  <section class="skill-section">
    <h2>Quick Start Template</h2>
    <pre><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;title&gt;My AI App&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;input type="text" id="prompt" placeholder="Ask anything..."&gt;
  &lt;button onclick="callAI()"&gt;Send&lt;/button&gt;
  &lt;pre id="response"&gt;&lt;/pre&gt;

  &lt;script&gt;
    const APP_SLUG = 'your-app-slug';

    async function callAI() {
      const prompt = document.getElementById('prompt').value;
      const res = await fetch('https://onhyper.io/proxy/openai/v1/chat/completions', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'X-App-Slug': APP_SLUG
        },
        body: JSON.stringify({
          model: 'gpt-4o-mini',
          messages: [{ role: 'user', content: prompt }]
        })
      });
      const data = await res.json();
      document.getElementById('response').textContent = 
        data.choices?.[0]?.message?.content || JSON.stringify(data, null, 2);
    }
  &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
    <p>Upload this as your app's HTML content, set a unique slug, and publish. Your app is live with secure API access.</p>
  </section>

  <section class="skill-section">
    <h2>Troubleshooting</h2>
    <table class="api-table">
      <thead>
        <tr>
          <th>Issue</th>
          <th>Cause</th>
          <th>Solution</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>404 on published URL</td>
          <td>Slug mismatch</td>
          <td>Verify actual slug from <code>GET /api/apps</code> ‚Äî may be auto-suffixed</td>
        </tr>
        <tr>
          <td>401 from proxy</td>
          <td>Slug header mismatch</td>
          <td>Confirm <code>X-App-Slug</code> exactly matches published slug</td>
        </tr>
        <tr>
          <td>403 app creation</td>
          <td>App limit reached</td>
          <td>Update existing app or upgrade plan</td>
        </tr>
        <tr>
          <td>App renders oddly</td>
          <td>HTML structure issue</td>
          <td>Switch to single-snippet HTML payload</td>
        </tr>
      </tbody>
    </table>
  </section>
</div>
